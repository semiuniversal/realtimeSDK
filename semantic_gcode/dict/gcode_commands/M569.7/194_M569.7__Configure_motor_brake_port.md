## M569.7: Configure motor brake port

### Parameters

- **Pn.n** Motor CAN board address (if applicable) and driver number

- **C"port"** Port name of the brake control port. **The port must be on the same CAN board as the driver.** The CAN address does not need to be specified in the port name, but if it is then it must be the same as the driver CAN address. In RRF3.5 and later, when this parameter is present the delay between brake on and motor off is set to the default value unless the S parameter is present.

- **Snnn** (optional, RRF 3.5 and later only) Delay in milliseconds between de-energising the brake solenoid (to activate the brake) and disabling the driver when M18 or M84 is used to turn off the motor. This is to allow the brake to engage fully before the motor current is turned off.

- **Vnn** (optional, supported in RRF 3.5 and later on EXP1HCL and M23CL that accept 48V VIN) Brake voltage. If the VIN voltage is or rises above this value, PWM will be used to reduce the average brake voltage to this value. Caution: use this option only in conjunction with a port that supports PWM! All Duet 3 OUT ports support PWM.

### Examples

M569.7 P40.0 C"out1" ; driver 0 on board 40 uses port out1 on board 40 to control the brake M569.7 P0.2 C"out9" S20 ; driver 2 on mainboard uses port out9 to control the brake, with 20ms delay

### Notes

- When the motor driver is enabled, the specified output port will be turned on at the same time to release the brake. When the motor driver is disabled, the output port will be turned off. Idle current mode does not count as disabled.

- After M569.7 is executed, the port will be initially off. Therefore, M569.7 should be executed before the motor is first enabled.

- As long as the brake solenoid max current draw is \<2A and it is rated for the VIN voltage used, it can be directly controlled by OUT pins (Duet 3) or FAN pins (Duet 2) which have flyback diodes, at VIN voltage (not using 5V/12V onboard regulator). If the current required is \>2A, a heater output can be used, however you must add a flyback diode in parallel with the brake solenoid.

