## M260.4: Raw Modbus transaction

Supported from firmware version 3.6

Perform a non-standard transaction with a Modbus slave device. The request and response must both start with the slave address and end with two CRC-16 bytes, but the data between them need not conform to the Modbus-RTU specification. RepRapFirmware prepends the slave address to the data and appends the CRC when sending. After receiving the specified number of bytes, RepRapFirmware checks that the received slave address and CRC are correct and removes them from the returned data. It is up to the user to check the other values in the response.

### Parameters

- **Pnn** Serial port to send/receive through, numbered as in M575 (1 = first aux port, 2 = second aux port). The port must already have been set to Device mode using M575.

- **Ann** Modbus slave device address

- **Rnn** Number of bytes to receive excluding the slave address and the CRC

- **Bnn:nn:nn...** Values to send excluding the slave address and the CRC

- **S"ascii data"** data to send (alternative to B parameter). Each character is converted to the corresponding ASCII value. Ignored if **B** parameter is present.

- **V"name"** (optional) name of a new variable to receive data into. If this parameter is not present then the data read is output to the console.

### Order dependency

The port used by the P parameter must already have been set to Device mode using M575.

### Examples

M260.4 P1 A1 B{0x06, 0x00, 0x01, 0x12, 0x34} R5 ; send data as hex

