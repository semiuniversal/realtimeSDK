## M558.2: Calibrate, set or report drive current and reading offset for scanning Z probe

Supported from RRF 3.5.0

### Parameters

- **Knn** (optional) probe number, default 0. The probe must be of a scanning type (see M558).

- **Snn** Drive current to set, or -1 to determine drive current and reading offset automatically. For LDC1612-based probes, when setting the current this should be in the range 0 to 31.

- **Rnnnn** (optional, default zero) Offset to subtract from the raw sensor reading. Only used if the S parameter is present and \>= 0.

### Usage

M558.2 Knn S-1 M558.2 Knn Snn Rnnnn M558.2 Knn

### Description

This command is used to set the drive current of scanning Z probes that use the LDC1612 chip. If the drive current is set too low, the sensor will not work when it is close to the bed. If the drive current is set too high, it will not work when the sensor is distant from the bed. Use M122 B# (where \# is the CAN address of the board that carries the sensor) to determine whether the sensor is working normally.

### Order dependency

Before M558.2 is used the probe must be defined as a scanning Z probe using M558. After M558.2 is used to change the drive current and/or reading offset, M558.1 should be used to recalibrate the probe.

### Examples

M558.2 K1 S-1 ; calibrate coil drive current and reading offset on probe 1, at current Z height M558.2 K1 Snn Rnnnn ; set coil drive current and reading offset on probe 1 M558.2 K1 ; report coefficients in use on probe 1

### Notes

- When using this command with S-1 to determine the optimum drive current automatically, the sensor should first be placed at the lower distance limit (closest distance from the metal bed surface) of the intended operating range.

- The R parameter (reading offset) will be subtracted from the raw reading from the sensor in order to make the displayed Z probe reading more readable. You can use a value of zero (the default), but then you will see large readings with only the last few digits changing.

- If M558 is used with no S parameter then the current drive level and offset are reported, eg

M558.2 K1 Sensor drive current is 15, offset is 139919

See also: Scanning Z Probe calibration

